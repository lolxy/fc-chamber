<div class="cham-companies-wrap">
  <template>
    <div class="btnbox">
      <div class="chamtypelist">
        <ul class="nav nav-pills">
          <li class="all" :class="{active:!currentTypeId}">
            <span @click="getCurrentTypeId()">全部企业</span>
          </li>
          <li v-for="elem in chamTypeList" :key="elem.typeId" :class="{active:elem.typeId == currentTypeId}">
            <span @click="getCurrentTypeId(elem.typeId)">{{ elem.name }}</span>
          </li>
        </ul>
      </div>
      <button class="btn btn-primary btn-add-new" @click="openCompanyManagerDialog" v-if="isMyCham">添加成员</button>
    </div>
    <div class="submenu" v-if="currentChildType.length">
      <ul class="nav nav-pills">
        <li v-for="childElem in currentChildType" :key="childElem.typeId" :class="{active:childElem.typeId == currentChildTypeId}">
          <span @click="getCurrentChildTypeId(childElem.typeId)">{{ childElem.name }}</span>
        </li>
      </ul>
    </div>
    <el-dialog class="company-manager-dialog" title="查找成员/公司" v-model="companyManagerVisible" size="large">
      <company-manager v-on:managerUpdate="onManagerUpdate"></company-manager>
    </el-dialog>
  </template>

  <template v-if="memberList.length">
    <company-grid :items="memberList" :currentChildTypeId="currentChildTypeId" :isAllowSort="isAllowSort" v-on:chamCompanyDeleted="onChamCompanyDeleted"></company-grid>
  </template>

  <infinite-loading :on-infinite="onListInfinite" spinner="waveDots" ref="streamInfiniteLoading">
    <span slot="no-more"><a href="javascript:void(0);" @click="backtop" class="backtop">返回顶部</a></span>
    <span slot="no-results">
      <placeholder text="暂无结果"></placeholder>
    </span>
  </infinite-loading>
</div>
